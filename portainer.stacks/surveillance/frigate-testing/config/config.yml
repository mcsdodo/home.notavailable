# Minimal Frigate config for testing vratnik VTO two-way audio
# No detection, no recording - just streaming for debugging

# Disable MQTT (not needed for testing)
mqtt:
  enabled: false

# Disable detection
detect:
  enabled: false

# Disable recording and snapshots
record:
  enabled: false

snapshots:
  enabled: false

# go2rtc stream configuration
go2rtc:
  streams:
    vratnik:
      - echo:/config/fix_vto_codecs.sh rtsp://{FRIGATE_RTSP_CREDENTIALS}@192.168.0.15:554/cam/realmonitor?channel=1&subtype=0
      - echo:/config/fix_vto_codecs.sh rtsp://{FRIGATE_RTSP_CREDENTIALS}@192.168.0.15:554/cam/realmonitor?channel=1&subtype=0&unicast=true#backchannel=1
      - rtsp://127.0.0.1:8554/vratnik_hd?audio=aac
    vratnik_hd:
      - echo:/config/fix_vto_codecs.sh rtsp://{FRIGATE_RTSP_CREDENTIALS}@192.168.0.15:554/cam/realmonitor?channel=1&subtype=1#backchannel=0
      - rtsp://127.0.0.1:8554/vratnik?audio=pcma&backchannel=0

  webrtc:
    candidates:
      # Windows: Use localhost for local testing
      - 127.0.0.1:8555
      - stun:8555

# Camera configuration
cameras:
  vratnik:
    enabled: true
    ffmpeg:
      inputs:
        # Use the restream from go2rtc for live view only
        - path: rtsp://127.0.0.1:8554/vratnik?video=copy
          input_args: preset-rtsp-restream-low-latency
          roles:
            - detect
version: 0.16-0
